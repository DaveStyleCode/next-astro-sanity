---
import SearchIcon from '../../public/search.svg';
import { COMPANY_NAME } from '../constants';
import { ThemeToggle } from './ThemeToggle';

const navLinks = [
  { href: '/blog', label: 'Blog' },
];

const companyName = COMPANY_NAME;
const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-50 border-b border-white/15 backdrop-blur-sm">
  <div class="mx-auto max-w-5xl px-4 py-4">
    <nav class="flex items-center justify-between">
      <a href="/" class="text-xl font-bold text-primary-600">
        {companyName} (Astro Demo)
      </a>

      <div class="flex items-center gap-6">
        <ul class="flex items-center gap-4">
          {navLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class={
                  [
                    'transition-colors',
                    (currentPath === link.href || (link.href !== '/' && currentPath.startsWith(link.href)))
                      ? 'text-primary-600'
                      : 'dark:text-primary-600 light:text-white'
                  ].join(' ')
                }
              >
                {link.label}
              </a>
            </li>
          ))}
        </ul>

        {/* 
          Islands Architecture: ThemeToggle uses client:load
          - Critical interaction: users expect immediate response
          - Small component size justifies eager hydration
          - Prevents flash of non-interactive button
        */}
        <ThemeToggle client:load />

        <a
          href="/search"
          class="rounded-lg p-2 hover:bg-secondary"
          aria-label="Search"
        >
          <SearchIcon class="h-5 w-5" />
        </a>
      </div>
    </nav>
  </div>
</header>
